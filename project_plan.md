# Conference-Chat 프로젝트 계획

## 1. 프로젝트 개요

이 프로젝트는 다국어 지원 실시간 채팅 애플리케이션으로, 컨퍼런스나 국제 행사에서 다양한 언어 사용자들이 원활하게 소통할 수 있도록 설계되었습니다. Google Translation API를 활용한 실시간 번역 기능과 Supabase를 백엔드로 활용한 실시간 데이터 동기화 기능이 핵심입니다.

## 2. 문제 분석

현재 프로젝트에서 발견된 주요 문제는:

1. **Supabase 연결 오류**: 개발자 콘솔에서 "400 (Bad Request)" 오류가 발생하고 있으며, 실시간 데이터베이스 업데이트가 보이지 않습니다.
2. **API 키 불일치**: 두 개의 다른 Supabase URL과 키가 섞여 사용되고 있습니다. config.js와 .env 파일에서 다른 값들이 설정되어 있습니다.
3. **사용자 인증 및 연결 관리**: 현재 단순한 사용자 식별 방식을 사용하고 있어 보안과 사용자 상태 관리가 취약합니다.

## 3. 구현 계획

### 3.1 버그 수정 및 기능 개선

1. **Supabase 설정 통합**
   - 현재 파일들에서 사용 중인 두 가지 다른 Supabase 설정을 확인하고 통합
   - 최신 설정을 기준으로 모든 API 키와 URL 업데이트
   - 테이블 스키마 확인 및 필요시 수정

2. **실시간 데이터 동기화 개선**
   - Supabase Realtime 구독 로직 점검 및 수정
   - 폴링 백업 메커니즘 확인 및 최적화
   - 오프라인 모드 기능 강화

3. **사용자 경험 개선**
   - 로딩 상태 표시 추가
   - 오류 메시지 개선
   - 반응형 디자인 최적화

### 3.2 새로운 기능 구현

1. **보안 강화**
   - API 키 보호 메커니즘 도입
   - 클라이언트 측 요청 검증 추가

2. **사용자 관리 기능 확장**
   - 온라인 상태 표시
   - 사용자 목록 기능
   - 타이핑 중 표시

3. **채팅 기능 확장**
   - 이미지 공유 기능
   - URL 자동 링크
   - 마크다운 지원

## 4. 진행 상황

- [x] 프로젝트 분석 완료
- [x] 문제점 식별 및 정리
- [x] Supabase 설정 통합 (config.unified.js 작성)
- [x] 테이블 스키마 확인 및 수정 (updated_schema.sql 작성)
- [x] 실시간 데이터 동기화 개선 (improved_dbService.js 작성)
- [x] 사용자 경험 개선 (로딩 인디케이터, 상태 표시 추가)
- [x] UI 개선 (status.css 추가)
- [x] Supabase 초기화 및 테이블 생성 자동화 (init-supabase.js 작성)
- [x] 오류 처리 개선 (app.js 작성)
- [x] 설정 스크립트 작성 (setup-supabase.sh 작성)
- [ ] 보안 강화
- [ ] 사용자 관리 기능 확장
- [ ] 채팅 기능 확장
- [ ] 최종 테스트 및 배포 준비

## 5. 구현 파일 목록

1. **config.unified.js**: 통합된 설정 파일
2. **updated_schema.sql**: 업데이트된 Supabase 스키마 정의
3. **improved_dbService.js**: 개선된 데이터베이스 서비스
4. **init-supabase.js**: Supabase 초기화 및 테이블 확인 스크립트
5. **app.js**: 개선된 메인 애플리케이션 스크립트
6. **status.css**: 상태 표시 및 로딩 관련 스타일
7. **index.html.improved**: 개선된 HTML 파일
8. **setup-supabase.sh**: Supabase 테이블 설정 스크립트

## 6. 다음 단계

1. **개선된 파일 적용**
   - 개선된 파일들을 기존 파일들로 대체
   - Supabase 설정 셋업 실행
   - 통합 테스트 수행

2. **추가 기능 개발**
   - 사용자 인증 개선
   - 실시간 사용자 목록 기능
   - 고급 채팅 기능 (이미지 공유, 마크다운 등)

3. **최종 테스트 및 배포**
   - 다양한 환경에서의 테스트
   - 성능 최적화
   - 배포 준비 및 실행
