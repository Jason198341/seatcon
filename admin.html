<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global SeatCon 2025 - 관리자 페이지</title>
    <link rel="stylesheet" href="css/admin.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="admin-container">
        <!-- 로그인 화면 -->
        <div id="admin-login-container" class="container">
            <div class="login-form">
                <h1 class="title">Global SeatCon 2025</h1>
                <h2 class="subtitle">관리자 페이지</h2>
                
                <div class="form-group">
                    <label for="admin-id">관리자 ID</label>
                    <input type="text" id="admin-id" placeholder="관리자 ID 입력">
                </div>
                
                <div class="form-group">
                    <label for="admin-password">비밀번호</label>
                    <input type="password" id="admin-password" placeholder="비밀번호 입력">
                </div>
                
                <div class="error-message" id="admin-login-error"></div>
                
                <button id="admin-login-button" class="primary-button">로그인</button>
            </div>
        </div>
        
        <!-- 관리자 대시보드 -->
        <div id="admin-dashboard" class="container hidden">
            <header class="admin-header">
                <h1>Global SeatCon 2025 관리자 페이지</h1>
                <button id="admin-logout" class="secondary-button">로그아웃</button>
            </header>
            
            <div class="admin-tabs">
                <button class="tab-button active" data-tab="chatrooms">채팅방 관리</button>
                <button class="tab-button" data-tab="users">사용자 관리</button>
                <button class="tab-button" data-tab="stats">통계 및 상태</button>
            </div>
            
            <div class="admin-content">
                <!-- 채팅방 관리 탭 -->
                <div id="chatrooms-tab" class="tab-content active">
                    <div class="tab-header">
                        <h2>채팅방 관리</h2>
                        <button id="create-room-button" class="primary-button">새 채팅방 생성</button>
                    </div>
                    
                    <div class="rooms-list-container">
                        <table class="rooms-table">
                            <thead>
                                <tr>
                                    <th>이름</th>
                                    <th>설명</th>
                                    <th>생성일</th>
                                    <th>상태</th>
                                    <th>최대 인원</th>
                                    <th>접근 제한</th>
                                    <th>정렬 순서</th>
                                    <th>작업</th>
                                </tr>
                            </thead>
                            <tbody id="rooms-list">
                                <!-- 채팅방 목록은 JavaScript로 동적 로드 -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 사용자 관리 탭 -->
                <div id="users-tab" class="tab-content">
                    <div class="tab-header">
                        <h2>사용자 관리</h2>
                        <div class="search-container">
                            <input type="text" id="user-search" placeholder="사용자 검색...">
                            <button id="user-search-button">검색</button>
                        </div>
                    </div>
                    
                    <div class="users-list-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>사용자 ID</th>
                                    <th>사용자명</th>
                                    <th>선호 언어</th>
                                    <th>현재 채팅방</th>
                                    <th>마지막 활동</th>
                                    <th>권한</th>
                                    <th>작업</th>
                                </tr>
                            </thead>
                            <tbody id="users-list">
                                <!-- 사용자 목록은 JavaScript로 동적 로드 -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 통계 및 상태 탭 -->
                <div id="stats-tab" class="tab-content">
                    <div class="tab-header">
                        <h2>통계 및 상태</h2>
                        <button id="refresh-stats" class="secondary-button">새로고침</button>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>사용자 통계</h3>
                            <div class="stat-content" id="user-stats">
                                <div class="stat-item">
                                    <span class="stat-label">총 사용자 수</span>
                                    <span class="stat-value" id="total-users">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">현재 활성 사용자</span>
                                    <span class="stat-value" id="active-users">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h3>채팅방 통계</h3>
                            <div class="stat-content" id="room-stats">
                                <div class="stat-item">
                                    <span class="stat-label">총 채팅방 수</span>
                                    <span class="stat-value" id="total-rooms">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">활성 채팅방</span>
                                    <span class="stat-value" id="active-rooms">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h3>메시지 통계</h3>
                            <div class="stat-content" id="message-stats">
                                <div class="stat-item">
                                    <span class="stat-label">총 메시지 수</span>
                                    <span class="stat-value" id="total-messages">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">오늘 메시지</span>
                                    <span class="stat-value" id="today-messages">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h3>시스템 상태</h3>
                            <div class="stat-content" id="system-stats">
                                <div class="stat-item">
                                    <span class="stat-label">DB 연결 상태</span>
                                    <span class="stat-value" id="db-status">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">번역 API 상태</span>
                                    <span class="stat-value" id="translation-status">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 채팅방 생성/수정 모달 -->
        <div id="room-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="room-modal-title">새 채팅방 생성</h3>
                    <button class="close-modal">✕</button>
                </div>
                <div class="modal-body">
                    <form id="room-form">
                        <input type="hidden" id="room-id">
                        
                        <div class="form-group">
                            <label for="room-name-input">채팅방 이름</label>
                            <input type="text" id="room-name-input" placeholder="채팅방 이름 입력" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="room-description">설명</label>
                            <textarea id="room-description" placeholder="채팅방 설명 입력"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="room-max-users">최대 사용자 수</label>
                            <input type="number" id="room-max-users" min="1" max="1000" value="100">
                        </div>
                        
                        <div class="form-group">
                            <label for="room-sort-order">정렬 순서</label>
                            <input type="number" id="room-sort-order" min="0" value="0">
                            <small>낮은 번호가 먼저 표시됩니다</small>
                        </div>
                        
                        <div class="form-group checkbox">
                            <input type="checkbox" id="room-is-active" checked>
                            <label for="room-is-active">활성화</label>
                        </div>
                        
                        <div class="form-group checkbox">
                            <input type="checkbox" id="room-is-private">
                            <label for="room-is-private">비공개 채팅방</label>
                        </div>
                        
                        <div id="access-code-container" class="form-group hidden">
                            <label for="room-access-code">접근 코드</label>
                            <input type="text" id="room-access-code" placeholder="비공개 채팅방 접근 코드 입력">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="save-room" class="primary-button">저장</button>
                    <button class="secondary-button close-modal">취소</button>
                </div>
            </div>
        </div>
        
        <!-- 사용자 수정 모달 -->
        <div id="user-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>사용자 정보 수정</h3>
                    <button class="close-modal">✕</button>
                </div>
                <div class="modal-body">
                    <form id="user-form">
                        <input type="hidden" id="edit-user-id">
                        
                        <div class="form-group">
                            <label for="edit-username">사용자명</label>
                            <input type="text" id="edit-username" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="edit-user-role">권한</label>
                            <select id="edit-user-role">
                                <option value="user">일반 사용자</option>
                                <option value="admin">관리자</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button id="save-user" class="primary-button">저장</button>
                    <button class="secondary-button close-modal">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 스크립트 -->
    <script src="js/services/dbService.js"></script>
    <script src="js/services/userService.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>